# 计算机网络

参考：https://blog.csdn.net/ThinkWon/article/details/104903925

![](https://github.com/skittlekx/JAVA_NOTE/blob/master/img/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84.png?raw=true)

# OSI 参考模型

![](https://github.com/skittlekx/JAVA_NOTE/blob/22268d6e48427d832c4fa5242aea69b31c99be9e/img/OSI%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B.png?raw=true)

四层协议，五层协议和七层协议的关系如下：
>
* TCP/IP是一个四层的体系结构，主要包括：应用层、运输层、网际层和网络接口层。
* 五层协议的体系结构主要包括：应用层、运输层、网络层，数据链路层和物理层。
* OSI七层协议模型主要包括是：应用层（Application）、表示层（Presentation）、会话层（Session）、运输层（Transport）、网络层（Network）、数据链路层（Data Link）、物理层（Physical）。

注：五层协议的体系结构只是为了介绍网络原理而设计的，实际应用还是 TCP/IP 四层体系结构。

## 应用层

应用层( application-layer ）的任务是通过应用进程间的交互来完成特定网络应用。应用层协议定义的是应用进程（进程：主机中正在运行的程序）间的通信和交互的规则。

对于不同的网络应用需要不同的应用层协议。在互联网中应用层协议很多，如域名系统 DNS，支持万维网应用的 HTTP 协议，支持电子邮件的 SMTP 协议等等。

## 运输层

运输层(transport layer)的主要任务就是负责向两台主机进程之间的通信提供通用的数据传输服务。应用进程利用该服务传送应用层报文。

运输层主要使用一下两种协议：

- 传输控制协议-TCP：提供面向连接的，可靠的数据传输服务。
- 用户数据协议-UDP：提供无连接的，尽最大努力的数据传输服务（不保证数据传输的可靠性）。

||UDP|TCP|
|:--:|:--:|:--:|
|是否连接|无连接|面向连接|
|是否可靠|不可靠传输，不使用流量控制和拥塞控制|可靠传输，使用流量控制和拥塞控制|
|连接对象个数|支持一对一，一对多，多对一和多对多交互通信|只能是一对一通信|
|传输方式|面向报文|面向字节流|
|首部开销|首部开销小，仅8字节|首部最小20字节，最大60字节|
|场景|适用于实时应用（IP电话、视频会议、直播等）|适用于要求可靠传输的应用，例如文件传输|

**每一个应用层（TCP/IP参考模型的最高层）协议一般都会使用到两个传输层协议之一：**

> **运行于TCP上**
>>- HTTP（Hypertext Transfer Protocol，超文本传输协议），主要用于普通浏览。
>>- HTTPS（HTTP over SSL，安全超文本传输协议）,HTTP协议的安全版本。
>>- FTP（File Transfer Protocol，文件传输协议），用于文件传输。
>>- POP3（Post Office Protocol, version 3，邮局协议），收邮件用。
>>- SMTP（Simple Mail Transfer Protocol，简单邮件传输协议），用来发送电子邮件。
>>- TELNET（Teletype over the Network，网络电传），通过一个终端（terminal）登陆到网络。
>>- SSH（Secure Shell，用于替代安全性差的TELNET），用于加密安全登陆用。

> **运行于UDP上**
>>- BOOTP（Boot Protocol，启动协议），应用于无盘设备。
>>- NTP（Network Time Protocol，网络时间协议），用于网络同步。
>>- DHCP（Dynamic Host Configuration Protocol，动态主机配置协议），动态配置IP地址。

> **运行于TCP/UDP上**
>>- DNS（Domain Name Service，域名服务），用于完成地址查找，邮件转发等工作。

## 网络层

网络层的任务就是选择合适的网间路由和交换结点，确保计算机通信的数据及时传送。在发送数据时，网络层把运输层产生的报文段或用户数据报封装成分组和包进行传送。在 TCP/IP 体系结构中，由于网络层使用 IP 协议，因此分组也叫 IP 数据报 ，简称数据报。

互联网是由大量的异构（heterogeneous）网络通过路由器（router）相互连接起来的。互联网使用的网络层协议是无连接的网际协议（Intert Prococol）和许多路由选择协议，因此互联网的网络层也叫做网际层或 IP 层。

## 数据链路层

数据链路层(data link layer)通常简称为链路层。两台主机之间的数据传输，总是在一段一段的链路上传送的，这就需要使用专门的链路层的协议。

在两个相邻节点之间传送数据时，数据链路层将网络层交下来的 IP 数据报组装成帧，在两个相邻节点间的链路上传送帧。每一帧包括数据和必要的控制信息（如同步信息，地址信息，差错控制等）。

在接收数据时，控制信息使接收端能够知道一个帧从哪个比特开始和到哪个比特结束。

一般的web应用的通信传输流是这样的：

![](https://github.com/skittlekx/JAVA_NOTE/blob/22268d6e48427d832c4fa5242aea69b31c99be9e/img/%E9%93%BE%E8%B7%AF%E5%B1%82%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93.png?raw=true)

发送端在层与层之间传输数据时，每经过一层时会被打上一个该层所属的首部信息。反之，接收端在层与层之间传输数据时，每经过一层时会把对应的首部信息去除。

## 物理层

在物理层上所传送的数据单位是比特。 物理层(physical layer)的作用是实现相邻计算机节点之间比特流的透明传送，尽可能屏蔽掉具体传输介质和物理设备的差异。使其上面的数据链路层不必考虑网络的具体传输介质是什么。“透明传送比特流”表示经实际电路传送后的比特流没有发生变化，对传送的比特流来说，这个电路好像是看不见的。